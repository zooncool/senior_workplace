<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>java高级开发 by zooncool</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">java高级开发</h1>
      <h2 class="project-tagline">tomcat本质初窥</h2>
      <a href="https://github.com/zooncool/senior_workplace" class="btn">View on GitHub</a>
      <a href="https://github.com/zooncool/senior_workplace/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/zooncool/senior_workplace/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <p>tomcat作为开源的热门web容器，用起来简单便捷，但是对其中原理缺不知一二，废话不说，先上个案例，模拟tomcat接受web端的网络请求，处理完返回页面结果。
服务端使用一个的HttpServer类，这是一个普通的Java类，通过里面的main（）方法来启动程序，充当服务端。
 public static void main(String[] args) {
    HttpServer server = new HttpServer();
    server.await();
  }</p>

<p>wait方法接受一个来自客户端的网络请求。
socket = serverSocket.accept();
然后对网络请求的数据进行封装
input = socket.getInputStream();
output = socket.getOutputStream();</p>

<p>response里面的响应方法sendStaticResource（）
该方法里面的OutputStream对象output调用了write（）输出字节流
String errorMessage = "HTTP/1.1 404 File Not Found\r\n" +
          "Content-Type: text/html\r\n" +
          "Content-Length: 23\r\n" +
          "\r\n" +
          "</p><h1>
<a id="file-not-found" class="anchor" href="#file-not-found" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>File Not Found</h1>";
        output.write(errorMessage.getBytes());

<p>这就是一个简单的tomcat模拟服务器</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/zooncool/senior_workplace">java高级开发</a> is maintained by <a href="https://github.com/zooncool">zooncool</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
